<!-- public/pages/standards.html - NOVO COM ABAS PARA CONSULTA E GERENCIAMENTO -->
<div class="container-fluid ps-2 pe-0"> <!-- MODIFICADO: Adicionado ps-2 pe-0 para alinhar com a sidebar -->
    <!-- Div onde o painel de informações do transformador será injetado -->
    <div id="transformer-info-standards-page" class="mb-2"></div>
    
    <!-- Título principal do módulo --><div class="card">        <div class="card-header d-flex align-items-center">
            <h6 class="card-header-title text-center m-0 flex-grow-1">NORMAS TÉCNICAS</h6>
            <button type="button" class="btn btn-sm btn-outline-light ms-2" title="Ajuda sobre Normas Técnicas">
                <i class="fas fa-question-circle"></i>
            </button>
        </div>
        <div class="card-body">
            <!-- ABAS DE NAVEGAÇÃO INTERNA -->
            <ul class="nav nav-tabs mb-3" id="standardsTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="consultation-tab" data-bs-toggle="tab" data-bs-target="#consultation-content" type="button" role="tab" aria-controls="consultation-content" aria-selected="true">Consulta de Normas</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="management-tab" data-bs-toggle="tab" data-bs-target="#management-content" type="button" role="tab" aria-controls="management-content" aria-selected="false">Gerenciamento de Normas</button>
                </li>
            </ul>

            <!-- CONTEÚDO DAS ABAS -->
            <div class="tab-content" id="standardsTabContent">
                <!-- ABA 1: Consulta de Normas (conteúdo original de standards_consultation.html) -->
                <div class="tab-pane fade show active" id="consultation-content" role="tabpanel" aria-labelledby="consultation-tab">
                    <div class="row">
                        <!-- Sidebar (Navegação e Filtros) -->
                        <div class="col-md-3 pe-1">
                            <!-- Seção de busca -->
                            <div class="card mb-3">
                                <div class="card-header fw-bold">Busca</div>
                                <div class="card-body">
                                    <div class="input-group mb-3">
                                        <input type="text" class="form-control" id="standards-search-input" placeholder="Buscar nas normas...">
                                        <button class="btn btn-primary" type="button" id="standards-search-button">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                    <div id="standards-search-info"></div>
                                </div>
                            </div>
                            <!-- Seção de categorias -->
                            <div class="card mb-3">
                                <div class="card-header fw-bold">Categorias</div>
                                <div class="card-body">
                                    <div id="standards-categories-loading" class="text-center py-3">
                                        <div class="spinner-border text-primary" role="status">
                                            <span class="visually-hidden">Carregando...</span>
                                        </div>
                                        <div id="standards-categories-container">
                                            <!-- Conteúdo preenchido por JS -->
                                            <div class="list-group list-group-flush">
                                                <a href="#" class="list-group-item list-group-item-action list-group-item-dark">Todas</a>
                                                <a href="#" class="list-group-item list-group-item-action list-group-item-dark">Dielétrico</a>
                                                <a href="#" class="list-group-item list-group-item-action list-group-item-dark">Transformador</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Lista de normas -->
                            <div class="card">
                                <div class="card-header fw-bold">Normas Disponíveis</div>
                                <div class="card-body">
                                    <div id="standards-nav-loading" class="text-center py-3">
                                        <div class="spinner-border text-primary" role="status">
                                            <span class="visually-hidden">Carregando...</span>
                                        </div>
                                        <div id="standards-nav-sidebar">
                                            <!-- Conteúdo preenchido por JS -->
                                            <div class="list-group list-group-flush">
                                                <a href="#" class="list-group-item list-group-item-action list-group-item-dark">NBR 5356-1</a>
                                                <a href="#" class="list-group-item list-group-item-action list-group-item-dark">IEC 60076-1</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Botão para acessar gerenciamento de normas (agora muda de aba) -->
                            <button type="button" class="btn btn-success mt-3 w-100 fw-bold" data-bs-toggle="tab" data-bs-target="#management-content" id="standards-management-button">
                                <i class="fas fa-cog me-2"></i> Gerenciar Normas
                            </button>
                        </div>
                        <!-- Conteúdo principal -->
                        <div class="col-md-9 ps-1">
                            <!-- Resultados da busca -->
                            <div id="standards-search-results-container" class="mb-3 display-none">
                                <div class="card">
                                    <div class="card-header fw-bold">Resultados da Busca</div>
                                    <div class="card-body">
                                        <div id="standards-search-results">
                                            <!-- Conteúdo preenchido por JS -->
                                            <div class="text-muted text-center py-3">Nenhum resultado.</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Visualizador de norma -->
                            <div class="card">
                                <div class="card-header">
                                    <span id="standards-viewer-title" class="fw-bold">Visualizador de Norma</span>
                                    <button class="btn btn-link btn-sm float-end" title="Expandir visualizador" id="standards-fullscreen-button">
                                        <i class="fas fa-expand"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div id="standards-content-loading" class="text-center py-3">
                                        <div class="spinner-border text-primary" role="status">
                                            <span class="visually-hidden">Carregando...</span>
                                        </div>
                                        <div id="standards-metadata-display" class="mb-3">
                                            <!-- Metadados da norma por JS -->
                                            <div class="text-muted text-center">Nenhuma norma selecionada.</div>
                                        </div>
                                        <div id="standards-content-container" class="standards-content-container">
                                            <div id="standards-content-display" class="standards-markdown-content">
                                                <!-- Conteúdo da norma por JS -->
                                                <p class="text-muted text-center">Selecione uma norma ao lado para visualizá-la.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Mensagem informativa sobre gerenciamento de normas -->
                            <div class="alert alert-info mt-3">
                                <i class="fas fa-info-circle me-2"></i> Você pode adicionar novas normas técnicas clicando na aba <strong>Gerenciamento de Normas</strong>.
                            </div>
                        </div>
                    </div>
                </div>
                <!-- FIM DA ABA 1: Consulta de Normas -->

                <!-- ABA 2: Gerenciamento de Normas (conteúdo original de standards_management.html) -->
                <div class="tab-pane fade" id="management-content" role="tabpanel" aria-labelledby="management-tab">
                    <!-- Store para comunicação entre callbacks -->
                    <input type="hidden" id="standards-processing-status-store">

                    <div class="row">
                        <!-- Formulário de upload -->
                        <div class="col-md-6 pe-1">
                            <div class="card mb-4">
                                <div class="card-header fw-bold">Adicionar Nova Norma</div>
                                <div class="card-body">
                                    <!-- Upload de PDF -->
                                    <div class="mb-3">
                                        <label class="form-label">Arquivo PDF da Norma</label>
                                        <div class="upload-area upload-area-standards" id="upload-standard-pdf">>
                                            Arraste e solte ou <a href="#" class="text-primary">selecione um arquivo PDF</a>
                                            <input type="file" accept=".pdf" style="display: none;">
                                        </div>
                                        <div id="upload-standard-info" class="mt-2"></div>
                                    </div>
                                    <!-- Metadados da norma -->
                                    <div class="row">
                                        <div class="col-12 mb-3">
                                            <label class="form-label">Título da Norma</label>
                                            <input type="text" class="form-control" id="standard-title-input" placeholder="Ex: Transformadores de Potência - Parte 3: Níveis de Isolamento">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Número da Norma</label>
                                            <input type="text" class="form-control" id="standard-number-input" placeholder="Ex: NBR 5356-3">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Organização</label>
                                            <input type="text" class="form-control" id="standard-organization-input" placeholder="Ex: ABNT">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Ano de Publicação</label>
                                            <input type="number" class="form-control" id="standard-year-input" placeholder="Ex: 2014" min="1900" max="2100">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Categorias (separadas por vírgula)</label>
                                            <input type="text" class="form-control" id="standard-categories-input" placeholder="Ex: Dielétrico, Transformador, Ensaios">
                                        </div>
                                    </div>
                                    <!-- Botão de processamento -->
                                    <button type="button" class="btn btn-primary mt-2" id="process-standard-button">Processar Norma</button>
                                    <!-- Status do processamento -->
                                    <div id="processing-status-display" class="mt-3">
                                        <div class="text-muted">Pronto para processar normas</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Lista de normas existentes -->
                        <div class="col-md-6 ps-1">
                            <div class="card">
                                <div class="card-header fw-bold">Normas Cadastradas</div>
                                <div class="card-body">
                                    <div id="existing-standards-loading" class="text-center py-3">
                                        <div class="spinner-border text-primary" role="status">
                                            <span class="visually-hidden">Carregando...</span>
                                        </div>
                                        <div id="existing-standards-list">
                                            <!-- Lista de normas carregadas por JS -->
                                            <div class="text-muted text-center">Nenhuma norma cadastrada.</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- FIM DA ABA 2: Gerenciamento de Normas -->
            </div>
        </div>
    </div>
</div>